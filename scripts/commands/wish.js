module.exports = {
  config: {
    name: "wish",
    version: "3.0.1",
    credit: "Joy Ahmed",
    permission: 2, // 0 = everyone, 1 = group admin, 2 = bot admin
    shortDescription: "‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ",
    longDescription: "‡¶Æ‡ßá‡¶®‡¶∂‡¶®/‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶ï‡¶∞‡¶æ ‡¶á‡¶â‡¶ú‡¶æ‡¶∞‡¶ï‡ßá ‡¶è‡¶ï‡¶æ‡¶ß‡¶ø‡¶ï ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶∂ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶¨‡¶æ‡¶∞‡ßç‡¶§‡¶æ ‡¶™‡¶æ‡¶†‡¶æ‡¶Ø‡¶º‡•§",
    Prefix: true,
    category: "fun",
    guide: {
      en: "{p}wish @mention\n{p}wish me (‡¶®‡¶ø‡¶ú‡ßá‡¶ï‡ßá ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá)\n‡¶ï‡¶ø‡¶Ç‡¶¨‡¶æ ‡¶ï‡¶æ‡¶∞‡ßã ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡ßá ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá {p}wish"
    }
  },

  onStart: async function ({ api, event, args }) {
    try {
      let targetID, targetName;

      // 1) @mention ‡¶•‡¶æ‡¶ï‡¶≤‡ßá
      const mention = Object.keys(event.mentions || {})[0];
      if (mention) {
        targetID = mention;
        targetName = event.mentions[mention];
      }

      // 2) ".wish me" ‡¶π‡¶≤‡ßá ‡¶®‡¶ø‡¶ú‡ßá‡¶∞ ‡¶Ü‡¶á‡¶°‡¶ø
      else if (args && args[0] && args[0].toLowerCase() === "me") {
        targetID = event.senderID;
        targetName = "‡¶§‡ßÅ‡¶Æ‡¶ø";
      }

      // 3) ‡¶ï‡¶æ‡¶∞‡ßã ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡ßá ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶ï‡¶Æ‡¶æ‡¶®‡ßç‡¶° ‡¶¶‡¶ø‡¶≤‡ßá
      else if (event.messageReply && event.messageReply.senderID) {
        targetID = event.messageReply.senderID;
        targetName = "‡¶Ü‡¶™‡¶®‡¶ø";
      }

      // ‡¶®‡¶æ ‡¶π‡¶≤‡ßá error
      if (!targetID) {
        return api.sendMessage("‚ùå ‡¶Ø‡¶æ‡¶ï‡ßá ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ ‡¶¶‡¶ø‡¶§‡ßá ‡¶ö‡¶æ‡¶ì ‡¶§‡¶æ‡¶ï‡ßá mention ‡¶ï‡¶∞‡ßã / `.wish me` ‡¶≤‡ßá‡¶ñ‡ßã / ‡¶ï‡¶æ‡¶∞‡ßã ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú‡ßá ‡¶∞‡¶ø‡¶™‡ßç‡¶≤‡¶æ‡¶á ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá `.wish` ‡¶¶‡¶æ‡¶ì!", event.threadID, event.messageID);
      }

      const tag = [{ id: targetID, tag: targetName }];

      // ‡¶∏‡ßç‡¶ü‡¶æ‡¶á‡¶≤‡¶ø‡¶∂ ‡¶¨‡¶ï‡ßç‡¶∏ ‡¶ü‡ßá‡¶Æ‡¶™‡ßç‡¶≤‡ßá‡¶ü
      const box = (text) =>
`‚ï≠‚ïº|‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ|‚ïæ‚ïÆ
${text}
‚ï∞‚ïº|‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ|‚ïæ‚ïØ`;

      const send = (body, delay = 0) =>
        setTimeout(() => {
          api.sendMessage({ body, mentions: tag }, event.threadID);
        }, delay);

      // ‡¶Æ‡ßá‡¶∏‡ßá‡¶ú ‡¶≤‡¶ø‡¶∏‡ßç‡¶ü
      const messages = [
        `üå∏ ${targetName}, ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ!\n‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶π‡ßã‡¶ï ‡¶∞‡¶ô‡¶ø‡¶® ‡¶Ü‡¶∞ ‡¶∏‡ßÅ‡¶ñ‡ßá ‡¶≠‡¶∞‡¶æ‡•§`,
        `‚ú® ${targetName}, ‡¶π‡¶æ‡¶∏‡¶ø ‡¶Æ‡ßÅ‡¶ñ‡ßá ‡¶ï‡¶æ‡¶ü‡ßÅ‡¶ï ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶Æ‡ßÅ‡¶π‡ßÇ‡¶∞‡ßç‡¶§!\nùêáùêÄùêèùêèùêò ùêÅùêàùêëùêìùêáùêÉùêÄùêò üéâ`,
        `üíñ ${targetName}, ‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶¶‡¶ø‡¶® ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶¨‡¶™‡ßç‡¶® ‡¶¶‡ßá‡¶ñ‡ßã,\n‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá ‡¶∞‡¶á‡¶≤‡ßã ‡¶Ö‡¶´‡ßÅ‡¶∞‡¶®‡ßç‡¶§ ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ!`,
        `üéÇ ${targetName}, ‡¶ú‡ßÄ‡¶¨‡¶® ‡¶π‡ßã‡¶ï ‡¶ï‡ßá‡¶ï‡ßá‡¶∞ ‡¶Æ‡¶§‡ßã ‡¶Æ‡¶ø‡¶∑‡ßç‡¶ü‡¶ø‡•§\n‡¶Ö‡¶®‡ßá‡¶ï ‡¶Ö‡¶®‡ßá‡¶ï ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ!`,
        `üåü ${targetName}, ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶¶‡¶ø‡¶® ‡¶Ü‡¶≤‡ßã‡¶Ø‡¶º ‡¶≠‡¶∞‡ßá ‡¶â‡¶†‡ßÅ‡¶ï,\n‡¶™‡ßç‡¶∞‡¶ø‡¶Ø‡¶º‡¶ú‡¶®‡¶¶‡ßá‡¶∞ ‡¶∏‡¶æ‡¶•‡ßá ‡¶ï‡¶æ‡¶ü‡ßÅ‡¶ï ‡¶∏‡ßÅ‡¶®‡ßç‡¶¶‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡•§`,
        `üéâ ${targetName}, ‡¶Ü‡¶ú ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶¶‡¶ø‡¶®, ‡¶Æ‡¶ú‡¶æ ‡¶ï‡¶∞‡ßã ‡¶ú‡¶Æ‡¶ø‡¶Ø‡¶º‡ßá!\n‡¶π‡ßç‡¶Ø‡¶æ‡¶™‡¶ø ‡¶¨‡¶æ‡¶∞‡ßç‡¶•‡¶°‡ßá ü•≥`,
        `üíê ${targetName}, ‡¶Ü‡¶ú ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡¶®‡ßç‡¶Ø ‡¶∞‡¶á‡¶≤‡ßã ‡¶¶‡ßã‡¶Ø‡¶º‡¶æ ‡¶ì ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ,\n‡¶§‡ßÅ‡¶Æ‡¶ø ‡¶•‡¶æ‡¶ï‡ßã ‡¶∏‡ßÅ‡¶∏‡ßç‡¶• ‡¶Ü‡¶∞ ‡¶ñ‡ßÅ‡¶∂‡¶ø!`,
        `üíù ${targetName}, ‡¶è‡¶á ‡¶π‡¶æ‡¶∏‡¶ø‡¶ü‡¶æ ‡¶Ø‡ßá‡¶® ‡¶ï‡¶ñ‡¶®‡ßã ‡¶®‡¶æ ‡¶Æ‡ßÅ‡¶õ‡ßá ‡¶Ø‡¶æ‡¶Ø‡¶º,\n‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®!`,
        `üéä ${targetName}, ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá‡¶∞ ‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶¨‡¶õ‡¶∞ ‡¶π‡ßã‡¶ï ‡¶∏‡ßá‡¶∞‡¶æ,\n‡¶∂‡ßÅ‡¶≠ ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ!`,
        `üéÄ ${targetName}, ‡¶§‡ßã‡¶Æ‡¶æ‡¶∞ ‡¶ú‡ßÄ‡¶¨‡¶®‡ßá ‡¶Ü‡¶∏‡ßÅ‡¶ï ‡¶∏‡ßÅ‡¶ñ, ‡¶∂‡¶æ‡¶®‡ßç‡¶§‡¶ø ‡¶Ü‡¶∞ ‡¶≠‡¶æ‡¶≤‡ßã‡¶¨‡¶æ‡¶∏‡¶æ‡•§`
      ];

      // ‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶∏‡ßç‡¶™‡ßá‡¶∂‡¶æ‡¶≤ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ
      send(box(`JOY AHMED b0sS ‡¶™‡¶ï‡ßç‡¶∑ ‡¶•‡ßá‡¶ï‡ßá ${targetName}-‡¶ï‡ßá ‡¶ú‡¶®‡ßç‡¶Æ‡¶¶‡¶ø‡¶®‡ßá‡¶∞ ‡¶∂‡ßÅ‡¶≠‡ßá‡¶ö‡ßç‡¶õ‡¶æ!\nüéâ HAPPY BIRTHDAY üéâ`), 0);

      // ‡¶¨‡¶æ‡¶ï‡¶ø‡¶ó‡ßÅ‡¶≤‡ßã ‡ß© ‡¶∏‡ßá‡¶ï‡ßá‡¶®‡ßç‡¶° ‡¶Ö‡¶®‡ßç‡¶§‡¶∞ ‡¶™‡¶æ‡¶†‡¶æ‡¶¨‡ßá
      messages.forEach((msg, i) => send(box(msg), 3000 * (i + 1)));

    } catch (e) {
      api.sendMessage("‚ùå ‡¶ï‡¶ø‡¶õ‡ßÅ ‡¶è‡¶ï‡¶ü‡¶æ ‡¶≠‡ßÅ‡¶≤ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá, ‡¶ï‡¶®‡¶∏‡ßã‡¶≤‡ßá error ‡¶¶‡ßá‡¶ñ‡ßã‡•§", event.threadID, event.messageID);
      console.error(e);
    }
  }
};
